# Python3 函数


函数是组织好的，可重复使用的，用来实现单一，或相关联功能的代码段。函数能提高应用的模块性，和代码的重复利用率。

------



### 定义一个函数
~函数代码块以 def 关键词开头，后接函数标识符名称和圆括号 ()。

~任何传入参数和自变量必须放在圆括号中间，圆括号之间可以用于定义参数。

~函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。

~函数内容以冒号起始，并且缩进。

~return [表达式] 结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 None。

函数定义时，所指定的参数是一种占位符，函数定义后，如果不经过调用，不会被执行，函数定义时，参数是输入、函数体是处理、结果是输出(IPO)
### 函数调用
在函数被调用时，实际参数（实参）会被引入被调用函数的本地符号表中；因此，实参是通过 按值调用 传递的（其中 值 始终是对象 引用 而不是对象的值）。 当一个函数调用另外一个函数时，将会为该调用创建一个新的本地符号表。
### 参数传递
调用函数时可使用的正式参数类型：

**必需参数**

**关键字参数**

**默认参数**

**不定长参数**

**必需参数:**必需参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样。
**关键字参数：**关键字参数和函数调用关系紧密，函数调用使用关键字参数来确定传入的参数值。使用关键字参数允许函数调用时参数的顺序与声明时不一致，因为 Python 解释器能够用参数名匹配参数值。

```python
def printme( str ):
   "打印任何传入的字符串"
   print (str)
   return
#调用printme函数
printme( str = "测试")
----------------------------
测试
```
**默认参数:**调用函数时，如果没有传递参数，则会使用默认参数。以下实例中如果没有传入 age 参数，则使用默认值：

```python
def printinfo( name, age = 8 ):
   "打印任何传入的字符串"
   print ("名字: ", name)
   print ("年龄: ", age)
   return
 
#调用printinfo函数
printinfo( age=12, name="小明" )
print ("************")
printinfo( name="小明" )
__________________________________________________
名字:  小明
年龄:  12
************
名字:  小明
年龄:  8
```
**不定长参数**
像max（x,y,z,...）这种不确定参数的函数，经常会使用到。
1、加了星号 * 的参数会以元组(tuple)的形式导入，存放所有未命名的变量参数。

```python
def printinfo( arg1, *vartuple ):
   "打印任何传入的参数"
   print ("输出: ")
   print (arg1)
   print (vartuple)
 
# 调用printinfo 函数
printinfo( 70, 60, 50 )
——————————————————————————————
输出: 
70
(60, 50)
```
2、加了两个星号 ** 的参数会以字典的形式导入。

```python
def printinfo( arg1, **vardict ):
   "打印任何传入的参数"
   print ("输出: ")
   print (arg1)
   print (vardict)
 
# 调用printinfo 函数
printinfo(1, a=2,b=3)
——————————————————————————————————
输出: 
1
{'a': 2, 'b': 3}
```
3、声明函数时，参数中星号 *可以单独出现，如果单独出现星号  后的参数必须用关键字传入。

```python
>>> def f(a,b,*,c):
...     return a+b+c
... 
>>> f(1,2,3)   # 报错
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: f() takes 2 positional arguments but 3 were given
>>> f(1,2,c=3) # 正常
6
>>>
```
### 函数返回值
1、return [表达式] 语句用于退出函数，选择性地向调用方返回一个表达式。不带参数值的return语句返回None。

2、return可以传递0个返回值，也可以传递任意多个返回值

3、即使没有 return 语句的函数也会返回一个值，尽管它是一个相当无聊的值。这个值称为 None （它是内置名称）。一般来说解释器不会打印出单独的返回值 None ，如果真想看到它，可以使用 print()。

```python
def fact(n, m=1) :
    s = 1
    for i inrange(1, n+1):
        s *= i
    return s//m, n, m
————————————————————————————
>>>fact( 10,  5  )
(725760, 10, 5)
>>>a,b,c= fact(10 ,5)
print(a,b,c)
725760 10 5
    
```

### 匿名函数
python 使用 lambda 来创建匿名函数。

—所谓匿名，意即不再使用 def 语句这样标准的形式定义一个函数。

—lambda 只是一个表达式，函数体比 def 简单很多。

—lambda的主体是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去。

—lambda 函数拥有自己的命名空间，且不能访问自己参数列表之外或全局命名空间里的参数。

—虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。

```python
<函数名>=lambda<参数>:<表达式>
```
例如：

```python
f = lambdax, y : x + y
f(10, 15)
输出：25
——————————————————————————
f = lambda:  "lambda函数"
print(f())
输出：lambda函数
```
lambda函数主要用作一些特定函数或方法的参数，lambda函数有一些固定使用方式，一般情况，建议使用def定义的普通函数。


### 强制位置参数
Python3.8 新增了一个函数形参语法 / 用来指明函数形参必须使用指定位置参数，不能使用关键字参数的形式。

在以下的例子中，形参 a 和 b 必须使用指定位置参数，c 或 d 可以是位置形参或关键字形参，而 e 或 f 要求为关键字形参:

```python
def f(a, b, /, c, d, *, e, f):
    print(a, b, c, d, e, f)
```
正确使用方法：

```python
f(10, 20, 30, d=40, e=50, f=60)
```
以下使用方法会发生错误:

```python
f(10, b=20, c=30, d=40, e=50, f=60)   # b 不能使用关键字参数的形式
f(10, 20, 30, 40, 50, f=60)           # e 必须使用关键字参数的形式
```

------

[^undefined]:

参考资料:[Python语言程序设计基础(第2版)》嵩天、礼欣、黄天羽著，高等教育出版社，2017.2（讲授Python 3版本）](https://item.jd.com/12128326.html?dist=jd)

[视频课程](http://www.icourse163.org/course/BIT-268001)

[Python3菜鸟教程](https://www.runoob.com/python3/python3-number.html)

[Python官方手册](https://docs.python.org/zh-cn/3/)
